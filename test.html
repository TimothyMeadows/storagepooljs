<html lang="en-us">

<head>
    <title></title>
    <script src="storagepool.js"></script>
</head>

<body>
    <script>
        StoragePool("test-container").then(function (container) {
            container.count().then(function (count) {
                console.log("file count: " + count);
            });

            container.list().then(function (list) {
                for (var i = 0; i <= list.length - 1; i++) {
                    console.log(i + ": " + list[i])
                }
            });

            var blob = new container.StorageBlob("/test/path/test.txt");
            blob.exists().then(function (exists) {
                if (exists) {
                    blob.delete().then(function () {
                        blob.write("This is the test contents of test.txt").then(function () {
                            blob.read().then(function (file) {
                                document.getElementById("file").innerText = file;
                                console.log(file);
                            });
                        });
                    });
                } else {
                    blob.write("This is the test contents of test.txt").then(function () {
                        blob.read().then(function (file) {
                            document.getElementById("file").innerText = file;
                            console.log(file);
                        });
                    });
                }
            });
        });
    </script>
    <div id="file"></div>
</body>

</html>